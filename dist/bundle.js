!function(e){var t={};function r(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(o,s,function(t){return e[t]}.bind(null,s));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=17)}([function(e,t){e.exports=require("express")},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(21)),n=r(22),i=r(4),a=r(27),c=r(28),d=r(29),u=r(9),l=r(31),p=r(32),f=r(6),y=r(34),h=r(44),_=r(45),g=r(47),m=r(15),b=r(50),R=r(51),v=r(52);t.blockchainService=new a.BlockchainService(i.blockchainRepository),t.systemService=new h.SystemService(i.systemRepository),t.accountService=new d.AccountService,t.webhookService=new u.WebhookService,t.transactionService=new y.TransactionCreator(n.slotService,s.default,t.accountService);const O=f.NODE_HOSTS.map(e=>_.initSocketIOClient(e.ip,e.port)).map(e=>new g.SocketIOClient(e)).map(e=>new b.Node(e));t.nodePool=new m.NodePool(O,v.nodeComparator),t.blockService=new c.BlockService(i.blockRepository,t.nodePool),t.transactionConfirmationService=new p.TransactionConfirmationService(i.transactionRepository,t.blockService,f.NUMBER_OF_CONFIRMATIONS),t.socketListenerManager=new R.SocketListenerManager(t.systemService,t.blockchainService,t.blockService,t.transactionConfirmationService,t.webhookService,i.transactionRepository,i.blockRepository,t.nodePool),l.configureWebhooks(t.webhookService)},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=o(r(58)),i=r(3),a=s(r(59)),c=r(10),d=new n.default({noTypeless:!0,noExtraKeywords:!0,noEmptyArrays:!0,noEmptyStrings:!0});if(!d.validateSchema(Object.values(a)))throw new Error("Invalid validation schema");t.validate=(e,t,r)=>{let o=r.value||r.get();return{value:(e,t)=>{const r=`${e.method} ${e.baseUrl}${e.route.path}`,s={...e.params,...e.query,...e.body};d.validate(s,r,(r,s)=>{if(s)return o.call(this,e,t);t.status(c.HTTP_STATUS.INTERNAL_SERVER_ERROR).send(new i.ResponseEntity({errors:["Invalid arguments",...r.map(e=>e.message)]}))})}}}},function(e,t){e.exports=require("ddk.registry/dist/model/common/responseEntity")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(23),s=r(24),n=r(25),i=r(26);t.blockRepository=new o.BlockRepository,t.blockchainRepository=new s.BlockchainRepository,t.systemRepository=new i.SystemRepository,t.transactionRepository=new n.TransactionRepository},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PAGINATION_SCHEME={limit:{type:"integer",minimum:1,maximum:100},offset:{type:"integer",minimum:0,maximum:1e3}}},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=o(r(19)),i=s(r(20)),a=r(7);n.default.config();const c=i.WORKSPACE[process.env.WORKSPACE];if(!c)throw new Error(`[Config] Unknown workspace: ${process.env.WORKSPACE}`);if(t.ON_APPLY_TRANSACTION=process.env.ON_APPLY_TRANSACTION,t.ON_APPLY_BLOCK=process.env.ON_APPLY_BLOCK,t.ON_DECLINE_TRANSACTION=process.env.ON_DECLINE_TRANSACTION,t.NUMBER_OF_CONFIRMATIONS=Number(process.env.NUMBER_OF_CONFIRMATIONS)||a.DEFAULT_NUMBER_OF_CONFIRMATIONS,console.log(`[Config] Workspace: ${c}`),i.default.initialize(c),BigInt.prototype.toJSON=function(){return this.toString()},process.env.NODE_HOST||process.env.NODE_API_PORT){throw new Error("Please, update the list of nodes in .env file by instruction: https://github.com/AraiEzzra/DDK.REST.API.CLIENT/blob/master/docs/environment.md#ddk-node-hosts and remove NODE_HOST, NODE_API_PORT environments")}const d=process.env.NODE_HOSTS;if(!d)throw new Error("[Config] NODE_HOSTS is missing");console.log(`[Config] NODE_HOSTS: ${d}`),t.NODE_HOSTS=d.split(",").map(e=>{const t=e.split(":");return{ip:t[0],port:Number(t[1])}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SSL_PORT=443,t.DEFAULT_SOCKET_TIMEOUT=2e3,t.DEFAULT_SOCKET_EVENT="message",t.DEFAULT_NUMBER_OF_CONFIRMATIONS=6},function(e,t){e.exports=require("ddk.registry/dist/util/crypto")},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(12));!function(e){e.APPLY_TRANSACTION="APPLY_TRANSACTION"}(t.WebhookAction||(t.WebhookAction={}));t.WebhookService=class{constructor(){this.actions=new Map}subscribe(e,t){this.actions.has(e)?this.actions.get(e).push(t):this.actions.set(e,[t])}unsubscribe(e,t){const r=this.actions.get(e);if(!r)return;const o=r.findIndex(e=>t===e);-1!==o&&r.splice(o,1)}on(e,t){this.actions.has(e)&&this.actions.get(e).forEach(e=>{s.default(e,{method:"post",body:JSON.stringify(t)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR"}(t.HTTP_STATUS||(t.HTTP_STATUS={})),t.isValidURL=e=>{return null!==e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)},t.parseUrls=e=>e?e.split(",").filter(e=>!!t.isValidURL(e)||(console.error(`[Error][extractUrls] url: ${e} is invalid`),!1)):[]},function(e,t){e.exports=require("ddk.registry/dist/util/account")},function(e,t){e.exports=require("node-fetch")},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/type")},function(e,t){e.exports=require("ddk.registry/dist/model/transport/message")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(3),s=r(49);var n;!function(e){e.repick="repick"}(n=t.NodePoolAction||(t.NodePoolAction={}));t.NodePool=class extends s.Emitter{constructor(e,t){super(),this.nodeSwitchHeightThreshold=3,this.initialPickTimeout=3e3,this.nodes=e,this.nodeComparator=t,this.onDisconnect=this.onDisconnect.bind(this),this.onApplyBlock=this.onApplyBlock.bind(this),this.init()}onApplyBlock(e){this.primary&&this.primary.height+this.nodeSwitchHeightThreshold<=e.height&&this.repickPrimary()}onDisconnect(e){this.primary&&e.socket.uri===this.primary.socket.uri&&this.repickPrimary()}init(){this.nodes.forEach(e=>e.socket.on("disconnect",t=>{this.onDisconnect(e)})),this.nodes.forEach(e=>e.socket.on("connect_timeout",t=>{this.onDisconnect(e)})),this.nodes.forEach(e=>{e.socket.addCodeListener("APPLY_BLOCK",this.onApplyBlock),e.socket.on("reconnect",()=>{e.socket.addCodeListener("APPLY_BLOCK",this.onApplyBlock)})}),setTimeout(()=>{this.primary||this.repickPrimary()},this.initialPickTimeout)}async send(e,t){if(!this.nodes.filter(e=>e.socket.isConnected).length)return new o.ResponseEntity({errors:["All nodes are disconnected. Please try again later."]});this.primary||(console.log("[NodePool][send] Primary node is missing. Repick"),this.repickPrimary());const r=await this.primary.socket.send(e,t);return!r.success&&r.errors.filter(e=>e.toLowerCase().includes("timeout")).length?(this.repickPrimary(),this.send(e,t)):r}repickPrimary(){if(!this.primary||1!==this.nodes.length){if(!this.nodes.filter(e=>e.socket.isConnected).length)return console.log("[NodePool][repickPrimary] Skip, no active connections"),void(this.primary=void 0);this.primary&&this.primary.socket.removeCodeListeners(),this.nodes.sort(this.nodeComparator.compare),this.primary=this.nodes[0],console.log(`[NodePool][repickPrimary] Primary node changed to ${this.primary.socket.uri}`),this.emit(n.repick,this.primary)}}}},function(e,t){e.exports=require("ddk.registry/dist/util/validate/scheme/filter")},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=o(r(18));r(6),r(1);const i=r(55),a=r(72),c=r(74),d=r(77),u=r(79),l=r(81),p=r(83),f=r(85),y=r(87),h=r(89),_=r(91),g=r(93),m=r(95),b=r(97),R=s.default();R.use(n.default.json()),R.use(n.default.urlencoded({extended:!1})),R.use("/api/transactions",i.transactionRouter),R.use("/api/blocks",u.blockRouter),R.use("/api/accounts",a.accountRouter),R.use("/api/utils",c.utilRouter),R.use("/api/webhook",d.webhookRouter),R.use("/api/blockchain",p.blockchainRouter),R.use("/api/system",l.systemRouter),R.use("/api/airdrop",f.airdropRouter),R.use("/api/asset",y.assetRouter),R.use("/api/rounds",h.roundRouter),R.use("/api/reward",_.rewardRouter),R.use("/api/tracing",g.tracingRouter),R.use("/api/delegates",m.delegatesRouter),R.use("/api/referredUsers",b.referredUsersRouter),R.listen(process.env.SERVER_PORT,()=>{console.log(`[DDK][RestAPI] Listening on port ${process.env.SERVER_PORT}!`)})},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("dotenv")},function(e,t){e.exports=require("ddk.registry")},function(e,t){e.exports=require("eska-common/dist/time_service")},function(e,t){e.exports=require("ddk.registry/dist/service/slot")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BlockRepository=class{constructor(){this.blocks=new Map,this.lastBlockHeight=0}add(e){this.blocks.has(e.id)||this.blocks.set(e.id,e)}get(e){return this.blocks.get(e)}has(e){return this.blocks.has(e)}remove(e){return this.blocks.delete(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BlockchainRepository=class{constructor(){this.info={airdropBalance:0,totalSupply:0,circulatingSupply:0,tokenHolders:0,totalStakeAmount:0,totalStakeHolders:0,transactionsCount:0}}getInfo(){return this.info}updateInfo(e){this.info=e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TransactionRepository=class{constructor(){this.transactions=new Map,this.add=this.add.bind(this),this.update=this.update.bind(this),this.get=this.get.bind(this),this.has=this.has.bind(this)}add(e){this.transactions.has(e.id)||this.transactions.set(e.id,e)}update(e){this.transactions.set(e.id,e)}get(e){return this.transactions.get(e)}has(e){return this.transactions.has(e)}remove(e){return this.transactions.delete(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SystemRepository=class{constructor(){this.info={height:0,consensus:0,datetime:new Date,peersCount:0,peers:[],broadhash:"",version:"",transactionsCount:{queue:0,conflictedQueue:0,pool:0}}}getInfo(){return this.info}updateInfo(e){this.info=e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BlockchainService=class{constructor(e){this.repository=e,this.onUpdateInfo=this.onUpdateInfo.bind(this)}onUpdateInfo(e){this.repository.updateInfo(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BlockService=class{constructor(e,t){this.repository=e,this.nodePool=t,this.onApplyBlock=this.onApplyBlock.bind(this)}onApplyBlock(e){this.repository.lastBlockHeight=e.height}add(e){this.repository.add(e)}async get(e){if(this.repository.has(e))return this.repository.get(e);const t=await this.nodePool.send("GET_BLOCK",{id:e});return t.success?t.data:null}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(8),s=r(11),n=r(30),i=r(3),a=r(1);t.AccountService=class{async fetchByAddress(e){const t=await a.nodePool.send("GET_ACCOUNT",{address:e});if(!t)return new i.ResponseEntity({errors:t.errors});const r=new n.Account({address:BigInt(t.data.address),publicKey:t.data.publicKey,secondPublicKey:t.data.secondPublicKey,referrals:t.data.referrals.map(e=>new n.Account({publicKey:"",address:BigInt(e)})),stakes:t.data.stakes,actualBalance:t.data.actualBalance});return new i.ResponseEntity({data:r})}async fetchByPublicKey(e){const t=s.getAddressByPublicKey(e);return this.fetchByAddress(t)}async fetchBySecret(e){const t=o.createKeyPairBySecret(e).publicKey.toString("hex");return this.fetchByPublicKey(t)}}},function(e,t){e.exports=require("ddk.registry/dist/model/common/account")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(6),s=r(9),n=r(10);t.configureWebhooks=e=>{n.parseUrls(o.ON_APPLY_TRANSACTION).forEach(t=>{e.subscribe(s.WebhookAction.APPLY_TRANSACTION,t),console.log(`[Configurator][Webhook]: ON_APPLY_TRANSACTION: ${t}`)}),n.parseUrls(o.ON_APPLY_BLOCK).forEach(t=>{e.subscribe("APPLY_BLOCK",t),console.log(`[Configurator][Webhook]: ON_APPLY_BLOCK: ${t}`)}),n.parseUrls(o.ON_DECLINE_TRANSACTION).forEach(t=>{e.subscribe("DECLINE_TRANSACTION",t),console.log(`[Configurator][Webhook]: ON_DECLINE_TRANSACTION: ${t}`)})}},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(12)),n=r(33);t.TransactionConfirmationService=class{constructor(e,t,r,o=864e5){this.numberOfConfirmations=r,this.transactionRepository=e,this.blockService=t,this.unsubscribeTimeout=o,this.listeners=new Map,this.unsubscribe=this.unsubscribe.bind(this),this.onApplyBlock=this.onApplyBlock.bind(this)}notify(e,t){return s.default(e,{method:"post",body:JSON.stringify(t)})}subscribe(e){const t=n.setTimeout(()=>this.unsubscribe(e.transactionId),this.unsubscribeTimeout);this.listeners.has(e.transactionId)||this.listeners.set(e.transactionId,[]),this.listeners.get(e.transactionId).push({...e,unsubscribeTimeoutId:t})}unsubscribe(e){this.listeners.has(e)&&(this.listeners.get(e).forEach(e=>n.clearTimeout(e.unsubscribeTimeoutId)),this.listeners.delete(e))}async onApplyBlock(e){const t=[];for(const[r,o]of this.listeners.entries()){const s=this.transactionRepository.get(r);if(!s||!s.blockId)return;const n=await this.blockService.get(s.blockId);if(!n)return;if(n.height+this.numberOfConfirmations>e.height)return;s.confirmations=e.height-n.height,o.forEach(e=>this.notify(e.url,s)),t.push(r)}t.forEach(this.unsubscribe)}}},function(e,t){e.exports=require("timers")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(13),s=r(35),n=r(36),i=r(37),a=r(38),c=r(39),d=r(40),u=r(3),l=r(41),p=r(42),f=r(43),y=r(4);t.TransactionCreator=class{constructor(e,t,r){this.slotService=e,this.timeService=t,this.accountService=r}createAsset(e,t){switch(e){case o.TransactionType.REFERRAL:const r={referral:BigInt(t.referral)};return new u.ResponseEntity({data:new s.AssetReferral(r)});case o.TransactionType.SEND:const l={recipientAddress:BigInt(t.recipientAddress),amount:t.amount};return new u.ResponseEntity({data:new n.AssetSend(l)});case o.TransactionType.SIGNATURE:const p={publicKey:t.publicKey};return new u.ResponseEntity({data:new c.AssetSignature(p)});case o.TransactionType.DELEGATE:const f={username:t.username};return new u.ResponseEntity({data:new i.AssetDelegate(f)});case o.TransactionType.STAKE:const y={amount:t.amount,startTime:t.startTime,airdropReward:t.airdropReward};return new u.ResponseEntity({data:new a.AssetStake(y)});case o.TransactionType.VOTE:const h={votes:t.votes,type:t.type,reward:t.reward,unstake:t.unstake,airdropReward:t.airdropReward};return new u.ResponseEntity({data:new d.AssetVote(h)});default:return new u.ResponseEntity({errors:["Unknown transaction type"]})}}async calculateAsset(e,t){switch(e.type){case o.TransactionType.STAKE:const r=p.createAssetStake({createdAt:e.createdAt||this.slotService.getTime(),amount:e.asset.amount},t,y.blockchainRepository.getInfo().airdropBalance);return new u.ResponseEntity({data:r});case o.TransactionType.VOTE:const s=l.createAssetVote({createdAt:e.createdAt||this.slotService.getTime(),type:e.asset.type,votes:e.asset.votes},t,y.blockRepository.lastBlockHeight,y.blockchainRepository.getInfo().airdropBalance);return new u.ResponseEntity({data:s});default:return this.createAsset(e.type,e.asset)}}async create(e,t,r){if(!e.createdAt){const t=await this.timeService.getTime();e.createdAt=this.slotService.getTime(t)}let s;switch(e.type){case o.TransactionType.STAKE:case o.TransactionType.VOTE:let r=await this.accountService.fetchBySecret(t);if(!r.success)return r;s=r.data}const n=await this.calculateAsset(e,s);return n.success?(e.asset=n.data,f.transactionCreator.create({data:e,sender:s,secret:t,secondSecret:r})):n}}},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/asset/referral")},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/asset/send")},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/asset/delegate")},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/asset/stake")},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/asset/signature")},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/asset/vote")},function(e,t){e.exports=require("ddk.registry/dist/service/transaction/vote")},function(e,t){e.exports=require("ddk.registry/dist/service/transaction/stake")},function(e,t){e.exports=require("ddk.registry/dist/service/transaction")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SystemService=class{constructor(e){this.repository=e,this.onUpdateInfo=this.onUpdateInfo.bind(this)}onUpdateInfo(e){this.repository.updateInfo(e)}}},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(46)),n=r(7);t.initSocketIOClient=(e,t)=>{const r=t===n.DEFAULT_SSL_PORT?"wss":"ws";return console.log(`[Service][Socket] Connecting to ${r}://${e}:${t}`),s.default(`${r}://${e}:${t}`,{timeout:2e3,transports:["websocket"]})}},function(e,t){e.exports=require("socket.io-client")},function(e,t,r){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=r(3),n=o(r(14)),i=r(48);t.SocketIOClient=class extends i.SocketClient{constructor(e,t,r){super(e,t,r);const o=()=>{e.sendBuffer=[]};e.on("connect",o),e.on("reconnect",o)}send(e,t){const r=new n.default(n.MessageType.REQUEST,e,t);return this.socket.emit(this.event,r),new Promise(e=>{const t=setTimeout(()=>{this.messageListeners.delete(r.headers.id),e(new s.ResponseEntity({errors:["Socket timeout"]}))},this.timeout);this.messageListeners.set(r.headers.id,r=>{clearTimeout(t),e(r)})})}get isConnected(){return this.socket.connected}get uri(){return this.socket.io.uri}}},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(14)),n=r(7);t.SocketClient=class{constructor(e,t=n.DEFAULT_SOCKET_EVENT,r=n.DEFAULT_SOCKET_TIMEOUT){this.socket=e,this.event=t,this.messageListeners=new Map,this.codeListeners=new Map,this.timeout=r,this.socket.on(this.event,e=>{const t=s.default.deserialize(e);this.messageListeners.has(t.getId())&&(this.messageListeners.get(t.getId())(t.getBody()),this.messageListeners.delete(t.getId())),this.codeListeners.has(t.code)&&this.codeListeners.get(t.code).forEach(e=>e(t.body))})}on(e,t){return this.socket.on(e,t)}emit(e,...t){return this.socket.emit(e,t)}getSocket(){return this.socket}addCodeListener(e,t){this.codeListeners.has(e)||this.codeListeners.set(e,[]),this.codeListeners.get(e).push(t)}removeCodeListener(e){this.codeListeners.has(e)&&this.codeListeners.delete(e)}removeCodeListeners(){for(const e of this.codeListeners.keys())this.removeCodeListener(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Emitter=class{constructor(){this.listeners=new Map}on(e,t){return this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t),this}emit(e,...t){return this.listeners.has(e)&&this.listeners.get(e).forEach(e=>e(...t)),this}removeListener(e,t){return this.listeners.has(e)&&this.listeners.set(e,this.listeners.get(e).filter(e=>e!==t)),this}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Node=class{constructor(e){this.blockchain={height:0},this.socket=e,this.onApplyBlock=this.onApplyBlock.bind(this),this.onUndoBlock=this.onUndoBlock.bind(this),this.socket.addCodeListener("APPLY_BLOCK",this.onApplyBlock),this.socket.addCodeListener("UNDO_BLOCK",this.onUndoBlock),this.socket.on("reconnect",()=>{this.socket.addCodeListener("APPLY_BLOCK",this.onApplyBlock),this.socket.addCodeListener("UNDO_BLOCK",this.onUndoBlock)})}onApplyBlock(e){this.blockchain.height=e.height}onUndoBlock(e){this.blockchain.height=e.height-1}get height(){return this.blockchain.height}get isConnected(){return this.socket.isConnected}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(9),s=r(15);t.SocketListenerManager=class{constructor(e,t,r,o,n,i,a,c){this.systemService=e,this.blockchainService=t,this.blockService=r,this.transactionConfirmationService=o,this.webhookService=n,this.transactionRepository=i,this.blockRepository=a,this.addListeners=this.addListeners.bind(this),c.on(s.NodePoolAction.repick,e=>{this.addListeners(e.socket)})}addWebhookServiceListeners(e){e.addCodeListener("DECLINE_TRANSACTION",e=>{this.webhookService.on("DECLINE_TRANSACTION",e)}),e.addCodeListener("APPLY_BLOCK",e=>{this.webhookService.on("APPLY_BLOCK",e),e.transactions.forEach(e=>{this.webhookService.on(o.WebhookAction.APPLY_TRANSACTION,e)})})}addBlockServiceListeners(e){e.addCodeListener("APPLY_BLOCK",this.blockService.onApplyBlock)}addTransactionConfirmationServiceListeners(e){e.addCodeListener("APPLY_BLOCK",e=>this.transactionConfirmationService.onApplyBlock(e))}addSystemServiceListeners(e){e.addCodeListener("UPDATE_SYSTEM_INFO",this.systemService.onUpdateInfo)}addBlockchainServiceListeners(e){e.addCodeListener("UPDATE_BLOCKCHAIN_INFO",this.blockchainService.onUpdateInfo)}addListeners(e){this.addWebhookServiceListeners(e),this.addBlockServiceListeners(e),this.addTransactionConfirmationServiceListeners(e),this.addSystemServiceListeners(e),this.addBlockchainServiceListeners(e),e.addCodeListener("APPLY_BLOCK",e=>{e.transactions.forEach(e=>{this.transactionRepository.has(e.id)?this.transactionRepository.update(e):this.transactionRepository.add(e)})}),e.addCodeListener("APPLY_BLOCK",e=>{this.blockRepository.add(e)}),e.addCodeListener("UNDO_BLOCK",e=>{this.blockRepository.remove(e.id)}),e.addCodeListener("UNDO_BLOCK",e=>{e.transactions.forEach(e=>{this.transactionRepository.remove(e.id)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(53),s=r(54);class n{constructor(e,t){this.connectComparator=e,this.heightDescComparator=t,this.compare=this.compare.bind(this)}compare(e,t){const r=this.connectComparator.compare(e,t);return r||this.heightDescComparator.compare(e,t)}}t.NodeComparator=n,t.nodeComparator=new n(o.nodeConnectComparator,s.nodeHeightDescComparator)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{compare(e,t){return!e.isConnected&&t.isConnected?1:e.isConnected&&!t.isConnected?-1:0}}t.NodeConnectComparator=o,t.nodeConnectComparator=new o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{constructor(e="ASC"){this.direction=e}compare(e,t){return e.height<t.height?"ASC"===this.direction?-1:1:e.height>t.height?"ASC"===this.direction?1:-1:0}}t.NodeHeightComparator=o,t.nodeHeightDescComparator=new o("DESC")},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(56);t.transactionRouter=s.default.Router(),t.transactionRouter.post("/getMany",n.transactionController.getMany),t.transactionRouter.get("/:id",n.transactionController.getById),t.transactionRouter.post("/",n.transactionController.create)},function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const s=r(57),n=r(1),i=r(2),a=r(1),c=r(4),d=r(10);class u{async getById(e,t){const r=await n.nodePool.send("GET_TRANSACTION",e.params);return r.success?r.data?t.send(r):t.status(d.HTTP_STATUS.NOT_FOUND).send(r):t.status(d.HTTP_STATUS.INTERNAL_SERVER_ERROR).send(r)}async getMany(e,t){const r=await n.nodePool.send("GET_TRANSACTIONS",e.body);return t.send(r)}async create(e,t){const r={...e.body.transaction,asset:e.body.transaction.asset},o=await a.transactionService.create(r,e.body.secret,e.body.secondSecret);if(!o.success)return o;const i=s.transactionSerializer.serialize(o.data),d=await n.nodePool.send("CREATE_PREPARED_TRANSACTION",i);return d.success&&c.transactionRepository.add(o.data),t.send(d)}}o([i.validate],u.prototype,"getById",null),o([i.validate],u.prototype,"getMany",null),o([i.validate],u.prototype,"create",null),t.TransactionController=u,t.transactionController=new u},function(e,t){e.exports=require("ddk.registry/dist/util/serialize/transaction")},function(e,t){e.exports=require("ddk.registry/dist/util/validate")},function(e,t,r){"use strict";function o(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),o(r(60)),o(r(61)),o(r(62)),o(r(63)),o(r(64)),o(r(65)),o(r(66)),o(r(67)),o(r(68)),o(r(69)),o(r(70)),o(r(71))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccountScheme={id:"GET /api/accounts/:address",type:"object",properties:{address:{type:"string",format:"address"}},required:["address"]},t.getAccountBalanceScheme={id:"GET /api/accounts/:address/balance",type:"object",properties:{address:{type:"string",format:"address"}},required:["address"]},t.createAccountScheme={id:"POST /api/accounts/",type:"object",properties:{secret:{type:"string",format:"secret"}},required:["secret"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(13),s=r(16);t.getTransactionByIdScheme={id:"GET /api/transactions/:id",type:"object",properties:{id:{type:"string",format:"id"}},required:["id"]},t.getTransactionsScheme={id:"POST /api/transactions/getMany",type:"object",properties:{...s.PAGINATION_SCHEME},required:["limit","offset"]},t.createTransactionScheme={id:"POST /api/transactions/",type:"object",properties:{transaction:{type:"object",properties:{type:{type:"integer",enum:Object.values(o.TransactionType)},asset:{type:"object"}},required:["type","asset"]},secret:{type:"string",format:"secret"},secondSecret:{type:"string",format:"secret"}},required:["transaction","secret"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onConfirmTransaction={id:"POST /api/webhook/subscribe/confirm-transaction",type:"object",properties:{transactionId:{type:"string",format:"id"},url:{type:"string"}},required:["url","transactionId"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(16);t.geBlockByIdScheme={id:"GET /api/blocks/:id",type:"object",properties:{id:{type:"string",format:"id"}},required:["id"]},t.getblocksScheme={id:"POST /api/blocks/getMany",type:"object",properties:{...o.PAGINATION_SCHEME},required:["limit","offset"]},t.getblockByHeight={id:"GET /api/blocks/getByHeight/:height",type:"object",properties:{height:{type:"integer",minimum:1}},required:["height"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeKeyPair={id:"POST /api/utils/make-key-pair",type:"object",properties:{secret:{type:"string",format:"secret"}},required:["secret"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAirdropRewardHistory={id:"POST /api/airdrop/",type:"object",properties:{referralAddress:{type:"string",format:"address"},startTime:{type:"number"},endTime:{type:"number"}},required:["referralAddress","startTime","endTime"]},t.getAirdropRewardDailyHistory={id:"GET /api/airdrop/:referralAddress",type:"object",properties:{referralAddress:{type:"string",format:"address"}},required:["referralAddress"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStakeAsset={id:"POST /api/asset/createStakeAsset",type:"object",properties:{address:{type:"string",format:"address"},amount:{type:"integer",minimum:1e8,maximum:45e14}},required:["address","amount"]},t.createVoteAsset={id:"POST /api/asset/createVoteAsset",type:"object",properties:{address:{type:"string",format:"address"},votes:{type:"array",items:{type:"string",format:"publicKey"},maxItems:3},type:{type:"string",enum:["+","-"]},createdAt:{type:"integer"}},required:["address","votes","type","createdAt"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(5);t.getDelegates={id:"POST /api/delegates/",type:"object",properties:{username:{type:"string",minLength:3},sort:{type:"array",items:{type:"array",items:{type:"string",enum:["ASC","DESC","approval","publicKey","votes","username"]}}},...o.PAGINATION_SCHEME},required:["limit","offset"]},t.getActiveDelegates={id:"POST /api/delegates/activeDelegates",type:"object",properties:{...o.PAGINATION_SCHEME},required:["limit","offset"]},t.getMyDelgates={id:"POST /api/delegates/myDelegates",type:"object",properties:{address:{type:"string",format:"address"},...o.PAGINATION_SCHEME},required:["address","limit","offset"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReferredUsers={id:"POST /api/referredUsers/",type:"object",properties:{address:{type:"string",format:"address"},level:{type:"number",minimum:0,maximum:15}},required:["address","level"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(5);t.getStakeRewards={id:"POST /api/reward/getStakeRewards",type:"object",properties:{senderPublicKey:{type:"string",format:"publicKey"},airdropTypes:{type:"array",items:{type:"string",enum:["airdrop","arp"]}},...o.PAGINATION_SCHEME},required:["senderPublicKey","limit","offset"]},t.getReferredUsersRewards={id:"POST /api/reward/getReferredUsersReward",type:"object",properties:{address:{type:"string",format:"address"},...o.PAGINATION_SCHEME},required:["address","limit","offset"]},t.getAirDropRewards={id:"POST /api/reward/getAirdropRewards",type:"object",properties:{address:{type:"string",format:"address"},...o.PAGINATION_SCHEME},required:["address","limit","offset"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(5);t.getBlockHistory={id:"GET /api/system/:id",type:"object",properties:{id:{type:"string",format:"id"}},required:["id"]},t.getAllUnconfirmedTransactions={id:"POST /api/system/getUnconfirmedTransactionHistory",type:"object",properties:{...o.PAGINATION_SCHEME,offset:{...o.PAGINATION_SCHEME.offset,maximum:1e5}},required:["limit","offset"]},t.getTransactionHistory={id:"GET /api/system/getTransactionHistiory/:id",type:"object",properties:{id:{type:"string",format:"id"}},required:["id"]},t.getAccountHistory={id:"GET /api/system/getAccountHistory/:address",type:"object",properties:{address:{type:"string",format:"address"}},required:["address"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(5);t.getRounds={id:"POST /api/rounds/",type:"object",properties:{...o.PAGINATION_SCHEME},required:["limit","offset"]},t.getCurrentRoundDelegates={id:"POST /api/rounds/currentRoundDelegates",type:"object",properties:{...o.PAGINATION_SCHEME},required:["limit","offset"]},t.getRound={id:"POST /api/rounds/getRound",type:"object",properties:{height:{type:"integer",minimum:1},...o.PAGINATION_SCHEME},required:["height","limit","offset"]}},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(73);t.accountRouter=s.default.Router(),t.accountRouter.get("/:address",n.accountController.get),t.accountRouter.get("/:address/balance",n.accountController.getBalance),t.accountRouter.post("/",n.accountController.create)},function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const s=r(8),n=r(11),i=r(3),a=r(2),c=r(1);class d{async create(e,t){const{secret:r}=e.body,o=s.createKeyPairBySecret(r).publicKey.toString("hex"),a=n.getAddressByPublicKey(o);return t.send(new i.ResponseEntity({data:{publicKey:o,address:a}}))}async get(e,t){const r=await c.nodePool.send("GET_ACCOUNT",e.params);return t.send(r)}async getBalance(e,t){const r=await c.nodePool.send("GET_ACCOUNT_BALANCE",e.params);return t.send(r)}}o([a.validate],d.prototype,"create",null),o([a.validate],d.prototype,"get",null),o([a.validate],d.prototype,"getBalance",null),t.AccountController=d,t.accountController=new d},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(75);t.utilRouter=s.default.Router(),t.utilRouter.get("/generate-passphrase",n.utilController.generatePassphrase),t.utilRouter.post("/make-key-pair",n.utilController.makeKeyPair)},function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const s=r(76),n=r(3),i=r(8);class a{generatePassphrase(e,t){const r=s.generatePassphrase(),o=new n.ResponseEntity({data:r});return t.send(o)}makeKeyPair(e,t){const{secret:r}=e.body,o=i.createKeyPairBySecret(r);return t.send({success:!0,data:{publicKey:o.publicKey.toString("hex"),privateKey:o.privateKey.toString("hex")}})}}o([r(2).validate],a.prototype,"makeKeyPair",null),t.UtilController=a,t.utilController=new a},function(e,t){e.exports=require("ddk.registry/dist/util/passphrase")},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(78);t.webhookRouter=s.default.Router(),t.webhookRouter.post("/subscribe/confirm-transaction",n.webhookController.onConfirmTransaction)},function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const s=r(1);class n{async onConfirmTransaction(e,t){return s.transactionConfirmationService.subscribe(e.body),t.send({success:!0})}}o([r(2).validate],n.prototype,"onConfirmTransaction",null),t.WebhookController=n,t.webhookController=new n},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(80);t.blockRouter=s.default.Router(),t.blockRouter.post("/getMany",n.blockController.getMany),t.blockRouter.get("/last",n.blockController.getLast),t.blockRouter.get("/:id",n.blockController.getById),t.blockRouter.get("/getByHeight/:height",n.blockController.getByHeight)},function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const s=r(2),n=r(1);class i{constructor(){this.getLast=this.getLast.bind(this)}async getById(e,t){const r=await n.nodePool.send("GET_BLOCK",e.params);return t.send(r)}async getByHeight(e,t){e.params.height=parseInt(e.params.height);const r=await n.nodePool.send("GET_BLOCK_BY_HEIGHT",e.params);return t.send(r)}async getMany(e,t){const r=await n.nodePool.send("GET_BLOCKS",e.body);return t.send(r)}async getLast(e,t){const r=await n.nodePool.send("GET_LAST_BLOCK",{});return t.send(r)}}o([s.validate],i.prototype,"getById",null),o([s.validate],i.prototype,"getMany",null),t.BlockController=i,t.blockController=new i},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(82);t.systemRouter=s.default.Router(),t.systemRouter.get("/info",n.systemController.getInfo),t.systemRouter.get("/getAccountHistory/:address",n.systemController.getAccountHistory),t.systemRouter.get("/:id",n.systemController.getBlockHistory),t.systemRouter.post("/getUnconfirmedTransactionHistory",n.systemController.getAllUnconfirmedTransactions),t.systemRouter.get("/getTransactionHistiory:/id",n.systemController.getTransactionHistory)},function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const s=r(3),n=r(4),i=r(2),a=r(1);class c{getInfo(e,t){const r=n.systemRepository.getInfo();return t.send(new s.ResponseEntity({data:r}))}async getAccountHistory(e,t){const r=await a.nodePool.send("GET_ACCOUNT_HISTORY",e.params);return t.send(r)}async getBlockHistory(e,t){const r=await a.nodePool.send("GET_BLOCK_HISTORY",e.params);return t.send(r)}async getTransactionHistory(e,t){console.log("tra his",e.params);const r=await a.nodePool.send("GET_TRANSACTION_HISTORY",e.params);return t.send(r)}async getAllUnconfirmedTransactions(e,t){const r=await a.nodePool.send("GET_ALL_UNCONFIRMED_TRANSACTIONS",e.body);return t.send(r)}}o([i.validate],c.prototype,"getAccountHistory",null),o([i.validate],c.prototype,"getBlockHistory",null),o([i.validate],c.prototype,"getAllUnconfirmedTransactions",null),t.SystemController=c,t.systemController=new c},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(84);t.blockchainRouter=s.default.Router(),t.blockchainRouter.get("/info",n.blockchainController.getInfo)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(3),s=r(4);class n{getInfo(e,t){const r=s.blockchainRepository.getInfo();return t.send(new o.ResponseEntity({data:r}))}}t.BlockchainController=n,t.blockchainController=new n},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(86);t.airdropRouter=s.default.Router(),t.airdropRouter.post("/",n.airdropHistoryController.getHistory),t.airdropRouter.get("/:referralAddress",n.airdropHistoryController.getAirdropDailyHistory)},function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const s=r(1),n=r(2);class i{async getHistory(e,t){const r=await s.nodePool.send("GET_AIRDROP_REWARD_HISTORY",e.body);return t.send(r)}async getAirdropDailyHistory(e,t){const r=await s.nodePool.send("GET_AIRDROP_REWARD_DAILY_HISTORY",e.params);return t.send(r)}}o([n.validate],i.prototype,"getHistory",null),o([n.validate],i.prototype,"getAirdropDailyHistory",null),t.AirdropHistoryController=i,t.airdropHistoryController=new i},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(88);t.assetRouter=s.default.Router(),t.assetRouter.post("/createStakeAsset",n.assetController.createStakeAsset),t.assetRouter.post("/createVoteAsset",n.assetController.createVoteAsset)},function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const s=r(1),n=r(2);class i{async createStakeAsset(e,t){const r=await s.nodePool.send("CREATE_STAKE_ASSET",e.body);return t.send(r)}async createVoteAsset(e,t){console.log("vote ",e.body);const r=await s.nodePool.send("CREATE_VOTE_ASSET",e.body);return t.send(r)}}o([n.validate],i.prototype,"createStakeAsset",null),o([n.validate],i.prototype,"createVoteAsset",null),t.AssetController=i,t.assetController=new i},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(90);t.roundRouter=s.default.Router(),t.roundRouter.get("/currentRound",n.roundController.GetCurrentRound),t.roundRouter.post("/currentRoundDelegates",n.roundController.getCurrentRoundDelegates),t.roundRouter.post("/getRound",n.roundController.getRound),t.roundRouter.post("/",n.roundController.getRounds)},function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const s=r(1),n=r(2);class i{async GetCurrentRound(e,t){const r=await s.nodePool.send("GET_CURRENT_ROUND",e.body);return t.send(r)}async getCurrentRoundDelegates(e,t){const r=await s.nodePool.send("GET_CURRENT_ROUND_DELEGATES",e.body);return t.send(r)}async getRounds(e,t){console.log("get rounds",e.body);const r=await s.nodePool.send("GET_ROUNDS",e.body);return t.send(r)}async getRound(e,t){const r=await s.nodePool.send("GET_ROUND",e.body);return t.send(r)}}o([n.validate],i.prototype,"getCurrentRoundDelegates",null),o([n.validate],i.prototype,"getRounds",null),o([n.validate],i.prototype,"getRound",null),t.RoundController=i,t.roundController=new i},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(92);t.rewardRouter=s.default.Router(),t.rewardRouter.post("/getReferredUsersReward",n.rewardController.getReferredUsersRewards),t.rewardRouter.post("/getStakeRewards",n.rewardController.getStakeRewards),t.rewardRouter.post("/getAirdropRewards",n.rewardController.getAirDropRewards)},function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const s=r(1),n=r(2);class i{async getStakeRewards(e,t){const r=await s.nodePool.send("GET_STAKE_REWARDS",e.body);return t.send(r)}async getReferredUsersRewards(e,t){const r=await s.nodePool.send("GET_REFERRED_USERS_REWARDS",e.body);return t.send(r)}async getAirDropRewards(e,t){const r=await s.nodePool.send("GET_AIRDROP_REWARDS",e.body);return t.send(r)}}o([n.validate],i.prototype,"getStakeRewards",null),o([n.validate],i.prototype,"getReferredUsersRewards",null),o([n.validate],i.prototype,"getAirDropRewards",null),t.RewardController=i,t.rewardController=new i},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(94);t.tracingRouter=s.default.Router(),t.tracingRouter.get("/",n.tracingController.GetTracing)},function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const s=r(1);class n{async GetTracing(e,t){const r=await s.nodePool.send("GET_TRACING",e.body);return t.send(r)}}o([r(2).validate],n.prototype,"GetTracing",null),t.TracingController=n,t.tracingController=new n},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(96);t.delegatesRouter=s.default.Router(),t.delegatesRouter.post("/",n.delegatesController.getDelegates),t.delegatesRouter.post("/activeDelegates",n.delegatesController.getActiveDelegates),t.delegatesRouter.post("/myDelegates",n.delegatesController.getMydelegates)},function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const s=r(1),n=r(2);class i{async getDelegates(e,t){const r=await s.nodePool.send("GET_DELEGATES",e.body);return t.send(r)}async getActiveDelegates(e,t){const r=await s.nodePool.send("GET_ACTIVE_DELEGATES",e.body);return t.send(r)}async getMydelegates(e,t){const r=await s.nodePool.send("GET_MY_DELEGATES",e.body);return t.send(r)}}o([n.validate],i.prototype,"getDelegates",null),o([n.validate],i.prototype,"getActiveDelegates",null),o([n.validate],i.prototype,"getMydelegates",null),t.DelegatesController=i,t.delegatesController=new i},function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(0)),n=r(98);t.referredUsersRouter=s.default.Router(),t.referredUsersRouter.post("/",n.referredUsersController.getReferedUsers)},function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const s=r(1);class n{async getReferedUsers(e,t){const r=await s.nodePool.send("GET_REFERRED_USERS",e.body);return t.send(r)}}o([r(2).validate],n.prototype,"getReferedUsers",null),t.ReferredUsersController=n,t.referredUsersController=new n}]);