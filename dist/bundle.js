!function(e){var t={};function s(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(o,r,function(t){return e[t]}.bind(null,r));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=18)}([function(e,t){e.exports=require("express")},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(23)),n=s(24),i=s(4),a=s(29),c=s(30),d=s(31),l=s(8),u=s(33),p=s(34),y=s(5),h=s(36),f=s(46),m=s(47),g=s(49),_=s(14),b=s(52),v=s(53),O=s(54);t.blockchainService=new a.BlockchainService(i.blockchainRepository),t.systemService=new f.SystemService(i.systemRepository),t.accountService=new d.AccountService,t.webhookService=new l.WebhookService,t.transactionService=new h.TransactionCreator(n.slotService,r.default,t.accountService);const S=y.NODE_HOSTS.map(e=>m.initSocketIOClient(e.ip,e.port)).map(e=>new g.SocketIOClient(e)).map(e=>new b.Node(e));t.nodePool=new _.NodePool(S,O.nodeComparator),t.blockService=new c.BlockService(i.blockRepository,t.nodePool),t.transactionConfirmationService=new p.TransactionConfirmationService(i.transactionRepository,t.blockService,y.NUMBER_OF_CONFIRMATIONS),t.socketListenerManager=new v.SocketListenerManager(t.systemService,t.blockchainService,t.blockService,t.transactionConfirmationService,t.webhookService,i.transactionRepository,i.blockRepository,t.nodePool),u.configureWebhooks(t.webhookService)},function(e,t){e.exports=require("ddk.registry/dist/model/common/responseEntity")},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=o(s(60)),i=s(2),a=r(s(61)),c=s(9),d=new n.default({noTypeless:!0,noExtraKeywords:!0,noEmptyArrays:!0,noEmptyStrings:!0});if(!d.validateSchema(Object.values(a)))throw new Error("Invalid validation schema");t.validate=(e,t,s)=>{let o=s.value||s.get();return{value:(e,t)=>{const s=`${e.method} ${e.baseUrl}${e.route.path}`,r={...e.params,...e.query,...e.body};d.validate(r,s,(s,r)=>{if(r)return o.call(this,e,t);t.status(c.HTTP_STATUS.INTERNAL_SERVER_ERROR).send(new i.ResponseEntity({errors:["Invalid arguments",...s.map(e=>e.message)]}))})}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(25),r=s(26),n=s(27),i=s(28);t.blockRepository=new o.BlockRepository,t.blockchainRepository=new r.BlockchainRepository,t.systemRepository=new i.SystemRepository,t.transactionRepository=new n.TransactionRepository},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=o(s(21)),i=r(s(22)),a=s(6);n.default.config();const c=i.WORKSPACE[process.env.WORKSPACE];if(!c)throw new Error(`[Config] Unknown workspace: ${process.env.WORKSPACE}`);if(t.ON_APPLY_TRANSACTION=process.env.ON_APPLY_TRANSACTION,t.ON_APPLY_BLOCK=process.env.ON_APPLY_BLOCK,t.ON_DECLINE_TRANSACTION=process.env.ON_DECLINE_TRANSACTION,t.NUMBER_OF_CONFIRMATIONS=Number(process.env.NUMBER_OF_CONFIRMATIONS)||a.DEFAULT_NUMBER_OF_CONFIRMATIONS,console.log(`[Config] Workspace: ${c}`),i.default.initialize(c),BigInt.prototype.toJSON=function(){return this.toString()},process.env.NODE_HOST||process.env.NODE_API_PORT){throw new Error("Please, update the list of nodes in .env file by instruction: https://github.com/AraiEzzra/DDK.REST.API.CLIENT/blob/master/docs/environment.md#ddk-node-hosts and remove NODE_HOST, NODE_API_PORT environments")}const d=process.env.NODE_HOSTS;if(!d)throw new Error("[Config] NODE_HOSTS is missing");console.log(`[Config] NODE_HOSTS: ${d}`),t.NODE_HOSTS=d.split(",").map(e=>{const t=e.split(":");return{ip:t[0],port:Number(t[1])}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SSL_PORT=443,t.DEFAULT_SOCKET_TIMEOUT=2e3,t.DEFAULT_SOCKET_EVENT="message",t.DEFAULT_NUMBER_OF_CONFIRMATIONS=6},function(e,t){e.exports=require("ddk.registry/dist/util/crypto")},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(11));!function(e){e.APPLY_TRANSACTION="APPLY_TRANSACTION"}(t.WebhookAction||(t.WebhookAction={}));t.WebhookService=class{constructor(){this.actions=new Map}subscribe(e,t){this.actions.has(e)?this.actions.get(e).push(t):this.actions.set(e,[t])}unsubscribe(e,t){const s=this.actions.get(e);if(!s)return;const o=s.findIndex(e=>t===e);-1!==o&&s.splice(o,1)}on(e,t){this.actions.has(e)&&this.actions.get(e).forEach(e=>{r.default(e,{method:"post",body:JSON.stringify(t)})})}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR"}(t.HTTP_STATUS||(t.HTTP_STATUS={})),t.isValidURL=e=>{return null!==e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/g)},t.parseUrls=e=>e?e.split(",").filter(e=>!!t.isValidURL(e)||(console.error(`[Error][extractUrls] url: ${e} is invalid`),!1)):[]},function(e,t){e.exports=require("ddk.registry/dist/util/account")},function(e,t){e.exports=require("node-fetch")},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/type")},function(e,t){e.exports=require("ddk.registry/dist/model/transport/message")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(2),r=s(51);var n;!function(e){e.repick="repick"}(n=t.NodePoolAction||(t.NodePoolAction={}));var i=0;t.NodePool=class extends r.Emitter{constructor(e,t){super(),this.nodeSwitchHeightThreshold=3,this.initialPickTimeout=3e3,this.nodes=e,this.nodeComparator=t,this.onDisconnect=this.onDisconnect.bind(this),this.onApplyBlock=this.onApplyBlock.bind(this),this.init()}onApplyBlock(e){this.primary&&this.primary.height+this.nodeSwitchHeightThreshold<=e.height&&this.repickPrimary()}onDisconnect(e){this.primary&&e.socket.uri===this.primary.socket.uri&&this.repickPrimary()}init(){this.nodes.forEach(e=>e.socket.on("disconnect",t=>{this.onDisconnect(e)})),this.nodes.forEach(e=>e.socket.on("connect_timeout",t=>{this.onDisconnect(e)})),this.nodes.forEach(e=>{e.socket.addCodeListener("APPLY_BLOCK",this.onApplyBlock),e.socket.on("reconnect",()=>{e.socket.addCodeListener("APPLY_BLOCK",this.onApplyBlock)})}),setTimeout(()=>{this.primary||this.repickPrimary()},this.initialPickTimeout)}async send(e,t){if(!this.nodes.filter(e=>e.socket.isConnected).length)return new o.ResponseEntity({errors:["All nodes are disconnected. Please try again later."]});if(!this.primary)return console.log("[NodePool][send] Primary node is missing. Repick"),new o.ResponseEntity({errors:["Nodes are not available. Please try again later."]});console.log(t);const s=await this.primary.socket.send(e,t);return!s.success&&s.errors.filter(e=>e.toLowerCase().includes("timeout")).length?3==i?new o.ResponseEntity({errors:["All nodes are disconnected. Please try again later."]}):(i+=1,this.send(e,t)):s}repickPrimary(){if(!this.primary||1!==this.nodes.length){if(!this.nodes.filter(e=>e.socket.isConnected).length)return console.log("[NodePool][repickPrimary] Skip, no active connections"),void(this.primary=void 0);this.primary&&this.primary.socket.removeCodeListeners(),this.nodes.sort(this.nodeComparator.compare),this.primary=this.nodes[0],console.log(`[NodePool][repickPrimary] Primary node changed to ${this.primary.socket.uri}`),this.emit(n.repick,this.primary)}}}},function(e,t){e.exports=require("ddk.registry/dist/util/validate/scheme/filter")},function(e,t){e.exports=require("ws")},function(e,t){e.exports=require("node-cache")},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(0)),n=o(s(19)),i=s(20);s(5),s(1);const a=s(57),c=s(71),d=s(73),l=s(76),u=s(78),p=s(80),y=s(82),h=s(84),f=s(86),m=s(87),g=i({windowMs:9e5,max:100}),_=r.default();_.use(g),_.use(n.default.json()),_.use(n.default.urlencoded({extended:!1})),_.use("/api/transactions",a.transactionRouter),_.use("/api/blocks",u.blockRouter),_.use("/api/accounts",c.accountRouter),_.use("/api/delegates",m.delegatesRouter),_.use("/api/utils",d.utilRouter),_.use("/api/webhook",l.webhookRouter),_.use("/api/blockchain",y.blockchainRouter),_.use("/api/system",p.systemRouter),_.use("/api/airdrop",h.airdropRouter),_.use("/api/asset",f.assetRouter),_.listen(process.env.SERVER_PORT,()=>{console.log(`[DDK][RestAPI] Listening on port ${process.env.SERVER_PORT}!`)})},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("express-rate-limit")},function(e,t){e.exports=require("dotenv")},function(e,t){e.exports=require("ddk.registry")},function(e,t){e.exports=require("eska-common/dist/time_service")},function(e,t){e.exports=require("ddk.registry/dist/service/slot")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BlockRepository=class{constructor(){this.blocks=new Map,this.lastBlockHeight=0}add(e){this.blocks.has(e.id)||this.blocks.set(e.id,e)}get(e){return this.blocks.get(e)}has(e){return this.blocks.has(e)}remove(e){return this.blocks.delete(e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BlockchainRepository=class{constructor(){this.info={airdropBalance:0,totalSupply:0,circulatingSupply:0,tokenHolders:0,totalStakeAmount:0,totalStakeHolders:0,transactionsCount:0}}getInfo(){return this.info}updateInfo(e){this.info=e}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TransactionRepository=class{constructor(){this.transactions=new Map,this.add=this.add.bind(this),this.update=this.update.bind(this),this.get=this.get.bind(this),this.has=this.has.bind(this)}add(e){this.transactions.has(e.id)||this.transactions.set(e.id,e)}update(e){this.transactions.set(e.id,e)}get(e){return this.transactions.get(e)}has(e){return this.transactions.has(e)}remove(e){return this.transactions.delete(e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SystemRepository=class{constructor(){this.info={height:0,consensus:0,datetime:new Date,peersCount:0,peers:[],broadhash:"",version:"",transactionsCount:{queue:0,conflictedQueue:0,pool:0}}}getInfo(){return this.info}updateInfo(e){this.info=e}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BlockchainService=class{constructor(e){this.repository=e,this.onUpdateInfo=this.onUpdateInfo.bind(this)}onUpdateInfo(e){this.repository.updateInfo(e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BlockService=class{constructor(e,t){this.repository=e,this.nodePool=t,this.onApplyBlock=this.onApplyBlock.bind(this)}onApplyBlock(e){this.repository.lastBlockHeight=e.height}add(e){this.repository.add(e)}async get(e){if(this.repository.has(e))return this.repository.get(e);const t=await this.nodePool.send("GET_BLOCK",{id:e});return t.success?t.data:null}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(7),r=s(10),n=s(32),i=s(2),a=s(1);t.AccountService=class{async fetchByAddress(e){const t=await a.nodePool.send("GET_ACCOUNT",{address:e});if(!t)return new i.ResponseEntity({errors:t.errors});const s=new n.Account({address:BigInt(t.data.address),publicKey:t.data.publicKey,secondPublicKey:t.data.secondPublicKey,referrals:t.data.referrals.map(e=>new n.Account({publicKey:"",address:BigInt(e)})),stakes:t.data.stakes,actualBalance:t.data.actualBalance});return new i.ResponseEntity({data:s})}async fetchByPublicKey(e){const t=r.getAddressByPublicKey(e);return this.fetchByAddress(t)}async fetchBySecret(e){const t=o.createKeyPairBySecret(e).publicKey.toString("hex");return this.fetchByPublicKey(t)}}},function(e,t){e.exports=require("ddk.registry/dist/model/common/account")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(5),r=s(8),n=s(9);t.configureWebhooks=e=>{n.parseUrls(o.ON_APPLY_TRANSACTION).forEach(t=>{e.subscribe(r.WebhookAction.APPLY_TRANSACTION,t),console.log(`[Configurator][Webhook]: ON_APPLY_TRANSACTION: ${t}`)}),n.parseUrls(o.ON_APPLY_BLOCK).forEach(t=>{e.subscribe("APPLY_BLOCK",t),console.log(`[Configurator][Webhook]: ON_APPLY_BLOCK: ${t}`)}),n.parseUrls(o.ON_DECLINE_TRANSACTION).forEach(t=>{e.subscribe("DECLINE_TRANSACTION",t),console.log(`[Configurator][Webhook]: ON_DECLINE_TRANSACTION: ${t}`)})}},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(11)),n=s(35);t.TransactionConfirmationService=class{constructor(e,t,s,o=864e5){this.numberOfConfirmations=s,this.transactionRepository=e,this.blockService=t,this.unsubscribeTimeout=o,this.listeners=new Map,this.unsubscribe=this.unsubscribe.bind(this),this.onApplyBlock=this.onApplyBlock.bind(this)}notify(e,t){return r.default(e,{method:"post",body:JSON.stringify(t)})}subscribe(e){const t=n.setTimeout(()=>this.unsubscribe(e.transactionId),this.unsubscribeTimeout);this.listeners.has(e.transactionId)||this.listeners.set(e.transactionId,[]),this.listeners.get(e.transactionId).push({...e,unsubscribeTimeoutId:t})}unsubscribe(e){this.listeners.has(e)&&(this.listeners.get(e).forEach(e=>n.clearTimeout(e.unsubscribeTimeoutId)),this.listeners.delete(e))}async onApplyBlock(e){const t=[];for(const[s,o]of this.listeners.entries()){const r=this.transactionRepository.get(s);if(!r||!r.blockId)return;const n=await this.blockService.get(r.blockId);if(!n)return;if(n.height+this.numberOfConfirmations>e.height)return;r.confirmations=e.height-n.height,o.forEach(e=>this.notify(e.url,r)),t.push(s)}t.forEach(this.unsubscribe)}}},function(e,t){e.exports=require("timers")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(12),r=s(37),n=s(38),i=s(39),a=s(40),c=s(41),d=s(42),l=s(2),u=s(43),p=s(44),y=s(45),h=s(4);t.TransactionCreator=class{constructor(e,t,s){this.slotService=e,this.timeService=t,this.accountService=s}createAsset(e,t){switch(e){case o.TransactionType.REFERRAL:const s={referral:BigInt(t.referral)};return new l.ResponseEntity({data:new r.AssetReferral(s)});case o.TransactionType.SEND:const u={recipientAddress:BigInt(t.recipientAddress),amount:t.amount};return new l.ResponseEntity({data:new n.AssetSend(u)});case o.TransactionType.SIGNATURE:const p={publicKey:t.publicKey};return new l.ResponseEntity({data:new c.AssetSignature(p)});case o.TransactionType.DELEGATE:const y={username:t.username};return new l.ResponseEntity({data:new i.AssetDelegate(y)});case o.TransactionType.STAKE:const h={amount:t.amount,startTime:t.startTime,airdropReward:t.airdropReward};return new l.ResponseEntity({data:new a.AssetStake(h)});case o.TransactionType.VOTE:const f={votes:t.votes,type:t.type,reward:t.reward,unstake:t.unstake,airdropReward:t.airdropReward};return new l.ResponseEntity({data:new d.AssetVote(f)});default:return new l.ResponseEntity({errors:["Unknown transaction type"]})}}async calculateAsset(e,t){switch(e.type){case o.TransactionType.STAKE:const s=p.createAssetStake({createdAt:e.createdAt||this.slotService.getTime(),amount:e.asset.amount},t,h.blockchainRepository.getInfo().airdropBalance);return new l.ResponseEntity({data:s});case o.TransactionType.VOTE:const r=u.createAssetVote({createdAt:e.createdAt||this.slotService.getTime(),type:e.asset.type,votes:e.asset.votes},t,h.blockRepository.lastBlockHeight,h.blockchainRepository.getInfo().airdropBalance);return new l.ResponseEntity({data:r});default:return this.createAsset(e.type,e.asset)}}async create(e,t,s){if(!e.createdAt){const t=await this.timeService.getTime();e.createdAt=this.slotService.getTime(t)}let r;switch(e.type){case o.TransactionType.STAKE:case o.TransactionType.VOTE:let s=await this.accountService.fetchBySecret(t);if(!s.success)return s;r=s.data}const n=await this.calculateAsset(e,r);return n.success?(e.asset=n.data,y.transactionCreator.create({data:e,sender:r,secret:t,secondSecret:s})):n}}},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/asset/referral")},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/asset/send")},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/asset/delegate")},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/asset/stake")},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/asset/signature")},function(e,t){e.exports=require("ddk.registry/dist/model/common/transaction/asset/vote")},function(e,t){e.exports=require("ddk.registry/dist/service/transaction/vote")},function(e,t){e.exports=require("ddk.registry/dist/service/transaction/stake")},function(e,t){e.exports=require("ddk.registry/dist/service/transaction")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SystemService=class{constructor(e){this.repository=e,this.onUpdateInfo=this.onUpdateInfo.bind(this)}onUpdateInfo(e){this.repository.updateInfo(e)}}},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(48)),n=s(6);t.initSocketIOClient=(e,t)=>{const s=t===n.DEFAULT_SSL_PORT?"wss":"ws";return console.log(`[Service][Socket] Connecting to ${s}://${e}:${t}`),r.default(`${s}://${e}:${t}`,{timeout:2e3,transports:["websocket"]})}},function(e,t){e.exports=require("socket.io-client")},function(e,t,s){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=s(2),n=o(s(13)),i=s(50);t.SocketIOClient=class extends i.SocketClient{constructor(e,t,s){super(e,t,s);const o=()=>{e.sendBuffer=[]};e.on("connect",o),e.on("reconnect",o)}send(e,t){const s=new n.default(n.MessageType.REQUEST,e,t);return this.socket.emit(this.event,s),new Promise(e=>{const t=setTimeout(()=>{this.messageListeners.delete(s.headers.id),e(new r.ResponseEntity({errors:["Socket timeout"]}))},this.timeout);this.messageListeners.set(s.headers.id,s=>{clearTimeout(t),e(s)})})}get isConnected(){return this.socket.connected}get uri(){return this.socket.io.uri}}},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(13)),n=s(6);t.SocketClient=class{constructor(e,t=n.DEFAULT_SOCKET_EVENT,s=n.DEFAULT_SOCKET_TIMEOUT){this.socket=e,this.event=t,this.messageListeners=new Map,this.codeListeners=new Map,this.timeout=s,this.socket.on(this.event,e=>{const t=r.default.deserialize(e);this.messageListeners.has(t.getId())&&(this.messageListeners.get(t.getId())(t.getBody()),this.messageListeners.delete(t.getId())),this.codeListeners.has(t.code)&&this.codeListeners.get(t.code).forEach(e=>e(t.body))})}on(e,t){return this.socket.on(e,t)}emit(e,...t){return this.socket.emit(e,t)}getSocket(){return this.socket}addCodeListener(e,t){this.codeListeners.has(e)||this.codeListeners.set(e,[]),this.codeListeners.get(e).push(t)}removeCodeListener(e){this.codeListeners.has(e)&&this.codeListeners.delete(e)}removeCodeListeners(){for(const e of this.codeListeners.keys())this.removeCodeListener(e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Emitter=class{constructor(){this.listeners=new Map}on(e,t){return this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t),this}emit(e,...t){return this.listeners.has(e)&&this.listeners.get(e).forEach(e=>e(...t)),this}removeListener(e,t){return this.listeners.has(e)&&this.listeners.set(e,this.listeners.get(e).filter(e=>e!==t)),this}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Node=class{constructor(e){this.blockchain={height:0},this.socket=e,this.onApplyBlock=this.onApplyBlock.bind(this),this.onUndoBlock=this.onUndoBlock.bind(this),this.socket.addCodeListener("APPLY_BLOCK",this.onApplyBlock),this.socket.addCodeListener("UNDO_BLOCK",this.onUndoBlock),this.socket.on("reconnect",()=>{this.socket.addCodeListener("APPLY_BLOCK",this.onApplyBlock),this.socket.addCodeListener("UNDO_BLOCK",this.onUndoBlock)})}onApplyBlock(e){this.blockchain.height=e.height}onUndoBlock(e){this.blockchain.height=e.height-1}get height(){return this.blockchain.height}get isConnected(){return this.socket.isConnected}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(8),r=s(14);t.SocketListenerManager=class{constructor(e,t,s,o,n,i,a,c){this.systemService=e,this.blockchainService=t,this.blockService=s,this.transactionConfirmationService=o,this.webhookService=n,this.transactionRepository=i,this.blockRepository=a,this.addListeners=this.addListeners.bind(this),c.on(r.NodePoolAction.repick,e=>{this.addListeners(e.socket)})}addWebhookServiceListeners(e){e.addCodeListener("DECLINE_TRANSACTION",e=>{this.webhookService.on("DECLINE_TRANSACTION",e)}),e.addCodeListener("APPLY_BLOCK",e=>{this.webhookService.on("APPLY_BLOCK",e),e.transactions.forEach(e=>{this.webhookService.on(o.WebhookAction.APPLY_TRANSACTION,e)})})}addBlockServiceListeners(e){e.addCodeListener("APPLY_BLOCK",this.blockService.onApplyBlock)}addTransactionConfirmationServiceListeners(e){e.addCodeListener("APPLY_BLOCK",e=>this.transactionConfirmationService.onApplyBlock(e))}addSystemServiceListeners(e){e.addCodeListener("UPDATE_SYSTEM_INFO",this.systemService.onUpdateInfo)}addBlockchainServiceListeners(e){e.addCodeListener("UPDATE_BLOCKCHAIN_INFO",this.blockchainService.onUpdateInfo)}addListeners(e){this.addWebhookServiceListeners(e),this.addBlockServiceListeners(e),this.addTransactionConfirmationServiceListeners(e),this.addSystemServiceListeners(e),this.addBlockchainServiceListeners(e),e.addCodeListener("APPLY_BLOCK",e=>{e.transactions.forEach(e=>{this.transactionRepository.has(e.id)?this.transactionRepository.update(e):this.transactionRepository.add(e)})}),e.addCodeListener("APPLY_BLOCK",e=>{this.blockRepository.add(e)}),e.addCodeListener("UNDO_BLOCK",e=>{this.blockRepository.remove(e.id)}),e.addCodeListener("UNDO_BLOCK",e=>{e.transactions.forEach(e=>{this.transactionRepository.remove(e.id)})})}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(55),r=s(56);class n{constructor(e,t){this.connectComparator=e,this.heightDescComparator=t,this.compare=this.compare.bind(this)}compare(e,t){const s=this.connectComparator.compare(e,t);return s||this.heightDescComparator.compare(e,t)}}t.NodeComparator=n,t.nodeComparator=new n(o.nodeConnectComparator,r.nodeHeightDescComparator)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{compare(e,t){return!e.isConnected&&t.isConnected?1:e.isConnected&&!t.isConnected?-1:0}}t.NodeConnectComparator=o,t.nodeConnectComparator=new o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{constructor(e="ASC"){this.direction=e}compare(e,t){return e.height<t.height?"ASC"===this.direction?-1:1:e.height>t.height?"ASC"===this.direction?1:-1:0}}t.NodeHeightComparator=o,t.nodeHeightDescComparator=new o("DESC")},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(0)),n=s(58);t.transactionRouter=r.default.Router(),t.transactionRouter.post("/getMany",n.transactionController.getMany),t.transactionRouter.get("/:id",n.transactionController.getById),t.transactionRouter.post("/",n.transactionController.create)},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var r,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(n<3?r(i):n>3?r(t,s,i):r(t,s))||i);return n>3&&i&&Object.defineProperty(t,s,i),i};Object.defineProperty(t,"__esModule",{value:!0});const r=s(59),n=s(1),i=s(3),a=s(1),c=s(4),d=s(9),l=s(16),u=new(s(17));class p{async getById(e,t){const s=await n.nodePool.send("GET_TRANSACTION",e.params);return s.success?s.data?t.send(s):t.status(d.HTTP_STATUS.NOT_FOUND).send(s):t.status(d.HTTP_STATUS.INTERNAL_SERVER_ERROR).send(s)}async getMany(e,t){var s=new Date;let o=e.body.limit,r=e.body.offset,n=null,i=null,a=null;if(e.body.sort&&(a=`"${(a=e.body.sort)[0][0]}","${a[0][1]}"`),console.log(`Request at: Get Many Transactions with {{${o}, ${r}}}, time: ${s}`),!(o<=50))return i={success:!1,errors:["Invalid arguments",`Value ${o} is greater than maximum 50`]},t.send(i);{let e=u.get("transactions");if(null!=e)return t.send(e);{let e=new l("ws://185.244.248.16:4903/");e.on("open",function(){null!=a?e.send(`{"event":"message","data":{"code":"GET_TRANSACTIONS","headers":{"id":"652f52d3-b2c1-43be-9307-1e28bb9c5c66","type":"request"},"body":{"paginator":{"limit":${o},"offset":${r}},"sort":[[${a}]]}}}`):e.send(`{"event":"message","data":{"code":"GET_TRANSACTIONS","headers":{"id":"652f52d3-b2c1-43be-9307-1e28bb9c5c66","type":"request"},"body":{"paginator":{"limit":${o},"offset":${r}}}}}`)}),e.on("message",function(s){if(0==(n=JSON.parse(s.toString())).data.body.success)return e.close(),t.send(n.data.body);i={success:!0,data:{transactions:n.data.body.data.data},count:n.data.body.data.totalCount};let o=u.set("transactions",i,100);return console.log(o),e.close(),t.send(i)})}}}async create(e,t){const s={...e.body.transaction,asset:e.body.transaction.asset},o=await a.transactionService.create(s,e.body.secret,e.body.secondSecret);if(!o.success)return o;const i=r.transactionSerializer.serialize(o.data),d=await n.nodePool.send("CREATE_PREPARED_TRANSACTION",i);return d.success&&c.transactionRepository.add(o.data),t.send(d)}}o([i.validate],p.prototype,"getById",null),o([i.validate],p.prototype,"getMany",null),o([i.validate],p.prototype,"create",null),t.TransactionController=p,t.transactionController=new p},function(e,t){e.exports=require("ddk.registry/dist/util/serialize/transaction")},function(e,t){e.exports=require("ddk.registry/dist/util/validate")},function(e,t,s){"use strict";function o(e){for(var s in e)t.hasOwnProperty(s)||(t[s]=e[s])}Object.defineProperty(t,"__esModule",{value:!0}),o(s(62)),o(s(63)),o(s(64)),o(s(66)),o(s(67)),o(s(68)),o(s(69)),o(s(70))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccountScheme={id:"GET /api/accounts/:address",type:"object",properties:{address:{type:"string",format:"address"}},required:["address"]},t.getAccountBalanceScheme={id:"GET /api/accounts/:address/balance",type:"object",properties:{address:{type:"string",format:"address"}},required:["address"]},t.createAccountScheme={id:"POST /api/accounts/",type:"object",properties:{secret:{type:"string",format:"secret"}},required:["secret"]}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(12),r=s(15);t.getTransactionByIdScheme={id:"GET /api/transactions/:id",type:"object",properties:{id:{type:"string",format:"id"}},required:["id"]},t.getTransactionsScheme={id:"POST /api/transactions/getMany",type:"object",properties:{...r.PAGINATION_SCHEME},required:["limit","offset"]},t.createTransactionScheme={id:"POST /api/transactions/",type:"object",properties:{transaction:{type:"object",properties:{type:{type:"integer",enum:Object.values(o.TransactionType)},asset:{type:"object"}},required:["type","asset"]},secret:{type:"string",format:"secret"},secondSecret:{type:"string",format:"secret"}},required:["transaction","secret"]}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(65);t.getDelegates={id:"POST /api/delegates/",type:"object",properties:{username:{type:"string",minLength:3},sort:{type:"array",items:{type:"array",items:{type:"string",enum:["ASC","DESC","approval","publicKey","votes","username"]}}},...o.PAGINATION_SCHEME},required:["limit","offset"]},t.getActiveDelegates={id:"POST /api/delegates/activeDelegates",type:"object",properties:{limit:{type:"integer",minimum:1,maximum:100},offset:{type:"integer",minimum:0,maximum:1e3}},required:["limit","offset"]},t.getMyDelgates={id:"POST /api/delegates/myDelegates",type:"object",properties:{address:{type:"string",format:"address"},limit:{type:"integer",minimum:1,maximum:100},offset:{type:"integer",minimum:0,maximum:1e3}},required:["address","limit","offset"]}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PAGINATION_SCHEME={limit:{type:"integer",minimum:1,maximum:100},offset:{type:"integer",minimum:0,maximum:1e3}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onConfirmTransaction={id:"POST /api/webhook/subscribe/confirm-transaction",type:"object",properties:{transactionId:{type:"string",format:"id"},url:{type:"string"}},required:["url","transactionId"]}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(15);t.geBlockByIdScheme={id:"GET /api/blocks/:id",type:"object",properties:{id:{type:"string",format:"id"}},required:["id"]},t.getblocksScheme={id:"POST /api/blocks/getMany",type:"object",properties:{...o.PAGINATION_SCHEME},required:["limit","offset"]}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeKeyPair={id:"POST /api/utils/make-key-pair",type:"object",properties:{secret:{type:"string",format:"secret"}},required:["secret"]}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAirdropRewardHistory={id:"GET /api/airdrop/",type:"object",properties:{referralAddress:{type:"string",format:"address"},startTime:{type:"number"},endTime:{type:"number"}},required:["referralAddress","startTime","endTime"]},t.getAirdropRewardDailyHistory={id:"GET /api/airdrop/:referralAddress",type:"object",properties:{referralAddress:{type:"string",format:"address"}},required:["referralAddress"]}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStakeAsset={id:"POST /api/asset/createStakeAsset",type:"object",properties:{address:{type:"string",format:"address"},amount:{type:"integer",minimum:1e8,maximum:45e14}},required:["address","amount"]},t.createVoteAsset={id:"POST /api/asset/createVoteAsset",type:"object",properties:{address:{type:"string",format:"address"},votes:{type:"array",items:{type:"string",format:"publicKey"},maxItems:3},type:{type:"string",enum:["+","-"]},createdAt:{type:"integer"}},required:["address","votes","type","createdAt"]}},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(0)),n=s(72);t.accountRouter=r.default.Router(),t.accountRouter.get("/:address",n.accountController.get),t.accountRouter.get("/:address/balance",n.accountController.getBalance),t.accountRouter.post("/",n.accountController.create)},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var r,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(n<3?r(i):n>3?r(t,s,i):r(t,s))||i);return n>3&&i&&Object.defineProperty(t,s,i),i};Object.defineProperty(t,"__esModule",{value:!0});const r=s(7),n=s(10),i=s(2),a=s(3),c=s(1);class d{async create(e,t){const{secret:s}=e.body,o=r.createKeyPairBySecret(s).publicKey.toString("hex"),a=n.getAddressByPublicKey(o);return t.send(new i.ResponseEntity({data:{publicKey:o,address:a}}))}async get(e,t){const s=await c.nodePool.send("GET_ACCOUNT",e.params);return t.send(s)}async getBalance(e,t){const s=await c.nodePool.send("GET_ACCOUNT_BALANCE",e.params);return t.send(s)}}o([a.validate],d.prototype,"create",null),o([a.validate],d.prototype,"get",null),o([a.validate],d.prototype,"getBalance",null),t.AccountController=d,t.accountController=new d},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(0)),n=s(74);t.utilRouter=r.default.Router(),t.utilRouter.get("/generate-passphrase",n.utilController.generatePassphrase),t.utilRouter.post("/make-key-pair",n.utilController.makeKeyPair)},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var r,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(n<3?r(i):n>3?r(t,s,i):r(t,s))||i);return n>3&&i&&Object.defineProperty(t,s,i),i};Object.defineProperty(t,"__esModule",{value:!0});const r=s(75),n=s(2),i=s(7);class a{generatePassphrase(e,t){const s=r.generatePassphrase(),o=new n.ResponseEntity({data:s});return t.send(o)}makeKeyPair(e,t){const{secret:s}=e.body,o=i.createKeyPairBySecret(s);return t.send({success:!0,data:{publicKey:o.publicKey.toString("hex"),privateKey:o.privateKey.toString("hex")}})}}o([s(3).validate],a.prototype,"makeKeyPair",null),t.UtilController=a,t.utilController=new a},function(e,t){e.exports=require("ddk.registry/dist/util/passphrase")},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(0)),n=s(77);t.webhookRouter=r.default.Router(),t.webhookRouter.post("/subscribe/confirm-transaction",n.webhookController.onConfirmTransaction)},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var r,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(n<3?r(i):n>3?r(t,s,i):r(t,s))||i);return n>3&&i&&Object.defineProperty(t,s,i),i};Object.defineProperty(t,"__esModule",{value:!0});const r=s(1);class n{async onConfirmTransaction(e,t){return r.transactionConfirmationService.subscribe(e.body),t.send({success:!0})}}o([s(3).validate],n.prototype,"onConfirmTransaction",null),t.WebhookController=n,t.webhookController=new n},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(0)),n=s(79);t.blockRouter=r.default.Router(),t.blockRouter.post("/getMany",n.blockController.getMany),t.blockRouter.get("/last",n.blockController.getLast),t.blockRouter.get("/:id",n.blockController.getById)},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var r,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(n<3?r(i):n>3?r(t,s,i):r(t,s))||i);return n>3&&i&&Object.defineProperty(t,s,i),i};Object.defineProperty(t,"__esModule",{value:!0});const r=s(3),n=s(1),i=new(s(17)),a=s(16);class c{constructor(){this.getLast=this.getLast.bind(this)}async getById(e,t){const s=await n.nodePool.send("GET_BLOCK",e.params);return t.send(s)}async getMany(e,t){var s=new Date;let o=e.body.limit,r=e.body.offset,n=null,c=null,d=null;if(e.body.sort&&(d=`"${(d=e.body.sort)[0][0]}","${d[0][1]}"`),console.log(`Request at: GetMany Blocks with {{${o}, ${r}}}, time: ${s}`),!(o<=50&&r<=1e3))return o>50?(c={success:!1,errors:["Invalid arguments",`Value of ${o} is greater than maximum 50`]},t.send(c)):(c={success:!1,errors:["Invalid arguments",`Value of ${r} is greater than maximum 1000`]},t.send(c));{let e=i.get("blocks");if(null!=e)return t.send(e);{let e=new a("ws://185.244.248.16:4903/");e.on("open",function(){null!=d?e.send(`{"event":"message","data":{"code":"GET_BLOCKS","headers":{"id":"652f52d3-b2c1-43be-9307-1e28bb9c5c66","type":"request"},"body":{"paginator":{"limit":${o},"offset":${r}},"sort":[[${d}]]}}}`):e.send(`{"event":"message","data":{"code":"GET_BLOCKS","headers":{"id":"3c5ec5a2-993c-41c8-b082-882bb69d5a16","type":"request"},"body":{"paginator":{"limit":${o},"offset":${r}},"sort":[["createdAt","desc"]]}}}`)}),e.on("message",function(s){if("GET_BLOCKS"==(n=JSON.parse(s.toString())).data.code){if(0!=n.data.body.success){c={success:!0,data:{blocks:n.data.body.data.data},count:n.data.body.data.totalCount};let e=i.set("blocks",c,100);console.log(e)}else c={success:!1,errors:["Invalid arguments","Value 0 is less than minimum 0"]};return e.close(),t.send(c)}})}}}async getLast(e,t){const s=await n.nodePool.send("GET_LAST_BLOCK",{});return t.send(s)}}o([r.validate],c.prototype,"getById",null),o([r.validate],c.prototype,"getMany",null),t.BlockController=c,t.blockController=new c},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(0)),n=s(81);t.systemRouter=r.default.Router(),t.systemRouter.get("/info",n.systemController.getInfo),t.systemRouter.get("/getAccountHistory",n.systemController.getAccountHistory),t.systemRouter.get("/:id",n.systemController.getBlockHistory),t.systemRouter.get("/getUnconfirmedTransactionHistory",n.systemController.getAllUnconfirmedTransactions),t.systemRouter.get("/getTransactionHistiory",n.systemController.getTransactionHistory)},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var r,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(n<3?r(i):n>3?r(t,s,i):r(t,s))||i);return n>3&&i&&Object.defineProperty(t,s,i),i};Object.defineProperty(t,"__esModule",{value:!0});const r=s(2),n=s(4),i=s(3),a=s(1);class c{getInfo(e,t){const s=n.systemRepository.getInfo();return t.send(new r.ResponseEntity({data:s}))}async getAccountHistory(e,t){const s=await a.nodePool.send("GET_ACCOUNT_HISTORY",e.body);return t.send(s)}async getBlockHistory(e,t){const s=await a.nodePool.send("GET_BLOCK_HISTORY",e.body);return t.send(s)}async getTransactionHistory(e,t){const s=await a.nodePool.send("GET_TRANSACTION_HISTORY",e.body);return t.send(s)}async getAllUnconfirmedTransactions(e,t){const s=await a.nodePool.send("GET_ALL_UNCONFIRMED_TRANSACTIONS",e.body);return t.send(s)}}o([i.validate],c.prototype,"getAccountHistory",null),o([i.validate],c.prototype,"getBlockHistory",null),o([i.validate],c.prototype,"getTransactionHistory",null),o([i.validate],c.prototype,"getAllUnconfirmedTransactions",null),t.SystemController=c,t.systemController=new c},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(0)),n=s(83);t.blockchainRouter=r.default.Router(),t.blockchainRouter.get("/info",n.blockchainController.getInfo),t.blockchainRouter.get("/circulatingSupply",n.blockchainController.getCirulatingSupply),t.blockchainRouter.get("/totalSupply",n.blockchainController.getTotalSupply)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(2),r=s(4);class n{getInfo(e,t){const s=r.blockchainRepository.getInfo();return t.send(new o.ResponseEntity({data:s}))}getCirulatingSupply(e,t){const s={success:!0,data:{circulatingSupply:r.blockchainRepository.getInfo().circulatingSupply}};return t.send(s)}getTotalSupply(e,t){const s={success:!0,data:{totalSupply:r.blockchainRepository.getInfo().totalSupply}};return t.send(s)}}t.BlockchainController=n,t.blockchainController=new n},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(0)),n=s(85);t.airdropRouter=r.default.Router(),t.airdropRouter.get("/",n.airdropHistoryController.getHistory),t.airdropRouter.get("/:referralAddress",n.airdropHistoryController.getAirdropDailyHistory)},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var r,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(n<3?r(i):n>3?r(t,s,i):r(t,s))||i);return n>3&&i&&Object.defineProperty(t,s,i),i};Object.defineProperty(t,"__esModule",{value:!0});const r=s(1),n=s(3);class i{async getHistory(e,t){const s=await r.nodePool.send("GET_AIRDROP_REWARD_HISTORY",e.body);return t.send(s)}async getAirdropDailyHistory(e,t){console.log("data get",e.params);const s=await r.nodePool.send("GET_AIRDROP_REWARD_DAILY_HISTORY",e.params);return t.send(s)}}o([n.validate],i.prototype,"getHistory",null),o([n.validate],i.prototype,"getAirdropDailyHistory",null),t.AirdropHistoryController=i,t.airdropHistoryController=new i},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(0));t.assetRouter=r.default.Router()},function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(s(0)),n=s(88);t.delegatesRouter=r.default.Router(),t.delegatesRouter.post("/",n.delegatesController.getDelegates),t.delegatesRouter.post("/activeDelegates",n.delegatesController.getActiveDelegates),t.delegatesRouter.post("/myDelegates",n.delegatesController.getMydelegates)},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var r,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(n<3?r(i):n>3?r(t,s,i):r(t,s))||i);return n>3&&i&&Object.defineProperty(t,s,i),i};Object.defineProperty(t,"__esModule",{value:!0});const r=s(1),n=s(3);class i{async getDelegates(e,t){var s=new Date;console.log(`Request on GetDelegate with ${e.body} at time: ${s}`);const o=await r.nodePool.send("GET_DELEGATES",e.body);return t.send(o)}async getActiveDelegates(e,t){var s=new Date;console.log(`Request on GetActiveDelegate with ${e.body} at time: ${s}`);const o=await r.nodePool.send("GET_ACTIVE_DELEGATES",e.body);return t.send(o)}async getMydelegates(e,t){var s=new Date;console.log(`Request on GetMyDelegate with ${e.body} at time: ${s}`);const o=await r.nodePool.send("GET_MY_DELEGATES",e.body);return t.send(o)}}o([n.validate],i.prototype,"getDelegates",null),o([n.validate],i.prototype,"getActiveDelegates",null),o([n.validate],i.prototype,"getMydelegates",null),t.DelegatesController=i,t.delegatesController=new i}]);